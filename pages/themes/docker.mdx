import { Cards, Callout, Steps } from 'nextra/components'
import { UilExternalLinkAlt } from '@components/Icons/ExternalLinkAlt'
import { UilArrowCircleUp } from '@components/Icons/ArrowCircleUp'

# Docker 部署

## Demo

<Cards num={2}>
  <Cards.Card
    arrow
    href="https://i-hentai.cc"
    title="无糖次元社区"
    icon={<img src="../logo.png" width={'25em'} />}
  />
</Cards>

## 前提要求

- 你已安装 Sugarless 后端并且已启动

## 准备步骤

export function FAQBox({ title, children }) {
  return (
    <details
      className="last-of-type:mb-0 rounded-lg bg-neutral-50 dark:bg-neutral-800 p-2 mt-4"
    >
      <summary>
        <strong className="text-lg">{title}</strong>
      </summary>
      <div className="nx-p-2">{children}</div>
    </details>
  )
}

<Steps>

## 拉取配置文件

<Callout type="warning" emoji="⚠️">
目前 Docker 镜像为私有仓库存储，你需要先联系相关成员[Mikuの鬆](https://www.sotkg.com)将你拉入私有存储镜像库后才能使用官方 Docker 镜像。
</Callout>

```bash
cd && mkdir -p sugarless/saikono && cd $_

# 拉取 docker-compose.yml 文件
wget https://fastly.jsdelivr.net/gh/SugarLess-CN/Script@main/saikono/docker-compose.yml
```

## 配置环境变量

在下方的配置表格中，填入你的环境变量，然后点击复制按钮，复制并新建粘贴到主题目录下`.env`文件内保存。

import { EnvVariableConfig } from '@components/EnvVariableConfig'

<EnvVariableConfig
  variableNames={[
    {
      key: 'NUXT_PUBLIC_API_BASE_URL',
      name: '后端 API 地址',
    },
    {
      key: 'NUXT_PUBLIC_SITE_BASE_URL',
      name: '前端地址',
    },
    {
      key: 'NUXT_PUBLIC_SITE_NAME',
      name: '站点名称',
    },
  ]}
/>

</Steps>

## 启动后端

```bash
docker compose up -d
```

## 完成！

至此，你已完成了 Saikono 主题的部署。

剩下的就是你的事了，你可以使用 [Nginx](https://nginx.org/en/download.html) 或者 [Caddy](https://caddyserver.com/download) 等反向代理工具，也可以使用 [Cloudflare](https://www.cloudflare.com/) 等 CDN 服务。本文不再赘述。

<style global jsx>{`
  .nextra-cards img {
    border-radius: 50%;
  }
  .nextra-content pre {
    max-height: 50vh;
  }
`}</style>